(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(94671)}])},94671:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return eU},default:function(){return eW}});var a=n(85893),s=n(64487),l=n(67294),r=n(9008),o=n.n(r),i=n(11163),c=n(41664),d=n.n(c),u=n(76812),m=n(66261),h=n(33299),p=n(92981),x=n(12023),f=n(14258),g=n(15497),b=n(13662),w=n(93333),v=n(51245),j=n(29134),N=n(9862),y=n(48794),k=n(38323),S=n(82010),C=n(30399),P=n(11319),I=n(29758),A=n(81829),T=n(635),E=n(20592),D=n(25675),F=n.n(D),M=n(50699),R=n(97910),_=(0,l.memo)(function(e){let{show:t,setShow:n,imageIndex:s,allImages:r,containerWidth:o}=e,handleClose=()=>n(!1),[i,c]=(0,l.useState)(s),d="https://www.google.com/s2/favicons?domain=".concat(new URL(r[i].page_url).hostname),{isXs:u,isMd:m,isSm:h}=(0,R.k)(),p=u?120:200;return(0,a.jsx)(M.Z,{show:t,onHide:handleClose,children:(0,a.jsxs)(M.Z.Body,{className:"px-0",children:[(0,a.jsxs)("button",{style:{display:"flex",alignItems:"left",justifyContent:"left",borderRadius:"50px",color:"white",width:"fit-content"},className:"btn btn-no-border mt-4 lift fs-5 fw-bold pb-3 ps-0",type:"button",onClick:handleClose,children:[(0,a.jsx)("i",{className:"mx-2 fe fe-x"}),"Close"]}),(0,a.jsx)("div",{style:{width:u||m||h?o:1.2*o,height:o/1.5,position:"relative",left:"50%",transform:"translateX(-50%)"},children:(0,a.jsx)(F(),{src:r[i].image_url,layout:"fill",alt:r[i].alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"mt-5",children:r.slice(0,4).map((e,t)=>(0,a.jsx)("div",{style:{width:p,height:p,position:"relative",border:t===i?"2px solid #e6f0fd":"none",borderRadius:"12px"},className:"mx-2 mb-5",onClick:()=>c(t),children:(0,a.jsx)(F(),{src:e.image_url,layout:"fill",alt:e.alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})},"image-".concat(e.image_url)))}),(0,a.jsxs)("a",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",backgroundColor:"#575a7b",borderRadius:"50px",color:"white",width:"fit-content",margin:"auto"},className:"lift",href:r[i].page_url,target:"_blank",rel:"noreferrer",children:[(0,a.jsx)("img",{src:d,style:{width:"20px",height:"20px"},className:"ms-1 me-2"}),(0,a.jsx)("span",{className:"me-2",children:new URL(r[i].page_url).hostname})]})]})})}),L=(0,l.memo)(function(e){let{url:t,width:n,height:s,onError:r,onHide:o,allImages:i,containerWidth:c,index:d}=e,[u,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!0);return(0,a.jsxs)("div",{className:"mx-2 mb-4 mt-2",children:[u&&(0,a.jsx)(_,{show:u,setShow:m,allImages:i,imageIndex:d,containerWidth:c}),h&&(0,a.jsx)("div",{style:{width:n,height:s,position:"relative"},children:(0,a.jsx)(F(),{src:t,layout:"fill",alt:"",style:{borderRadius:"10px"},objectFit:"cover",onError:()=>{r()},className:"image-hover",onClick:()=>{m(!0),y.n.track("Image Clicked",{url:t})},onLoadingComplete:e=>{let{naturalWidth:n,naturalHeight:a}=e;console.log(n,a),(n<100||a<100)&&(p(!1),o(t))},unoptimized:!0})})]})}),H=(0,l.memo)(function(e){let{images:t}=e,n=[...new Set(null==t?void 0:t.filter(e=>(0,b.jv)(e.image_url)).map(e=>e.image_url))],s=(0,l.useRef)(null),[r,o]=(0,l.useState)(75);(0,l.useEffect)(()=>{let updateWidth=()=>{s.current&&o(s.current.offsetWidth)};return window.addEventListener("resize",updateWidth),updateWidth(),()=>window.removeEventListener("resize",updateWidth)},[]);let[i,c]=(0,l.useState)([]),handleImageError=e=>{c(t=>[...t,e])},[d,u]=(0,l.useState)([]),handleHideImage=e=>{u(t=>[...t,e])},m=n&&n.length>0?Math.min(n.length-d.length,A.tJ):0,h=Math.min((r-35)/m,500),p=null==t?void 0:t.filter(e=>!d.includes(e.image_url)&&!i.includes(e.image_url));return(0,a.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"left"},ref:s,children:null==n?void 0:n.filter(e=>!i.includes(e)&&!d.includes(e)).slice(0,n.length>=A.tJ?A.tJ-1:A.tJ).map((e,t)=>{let n=m===A.tJ,s=h;return 1===m?s=r-25:n&&0===t&&(s=2*h),(0,a.jsx)(L,{url:e,width:s,height:h,onError:()=>handleImageError(e),onHide:()=>handleHideImage(e),allImages:p,containerWidth:r,index:t},"answer-image-".concat(e))})})});let O=(0,a.jsxs)("p",{className:"placeholder-glow",children:[(0,a.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,a.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,a.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),Z={strict:!1,output:"mathml"};function FootnoteLink(e){let{href:t="",children:n,...s}=e,{theme:l,setTheme:r,resolvedTheme:o}=(0,S.F)(),i="#333",c="#d6d6d6";if("object"==typeof n&&null!==n&&Array.isArray(n)&&n.length>0){let e=n[0];if(e===v.qz)return(0,a.jsx)("div",{className:"spinner-grow spinner-grow-sm",role:"status"});if(Number.isInteger(Number(e))||Number.isInteger(Number(e.substring(1,e.length-1))))return(0,a.jsx)(E.Z,{message:t,placement:"top",children:(0,a.jsx)("sup",{children:(0,a.jsx)("a",{href:t,target:"_blank",className:"me-1",rel:"noopener noreferrer",style:"dark"===o?{display:"inline-block",borderRadius:"50%",backgroundColor:"#333",color:"#fff",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"}:{display:"inline-block",borderRadius:"50%",backgroundColor:"#d6d6d6",color:"#333",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"},onMouseOver:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onMouseOut:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},onFocus:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onBlur:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},children:Number(e)+1})})})}return(0,a.jsx)("a",{href:t,...s,children:n})}let B=(0,l.memo)(function(e){let{markdown:t,showRunInCodeMode:n,isLoggedIn:s,isValidProPlan:l}=e,{theme:r,setTheme:o,resolvedTheme:i}=(0,S.F)(),c={backgroundColor:A.BY,padding:"3px",borderRadius:"8px",color:"white",cursor:"pointer"},d={backgroundColor:"white",padding:"3px",borderRadius:"8px",color:"black",cursor:"pointer"},u=function(e){let t=e.replace(/```latex([\s\S]*?)```/g,(e,t)=>{let n=t;return t.trim().startsWith("$")||(n="$".concat(t)),t.trim().endsWith("$")||(n="".concat(t,"$")),n});return t}(t);return(0,a.jsx)(k.D,{remarkPlugins:[C.Z,I.Z],rehypePlugins:[P.Z,[P.Z,Z]],className:"fs-5",components:{p:e=>{let{node:t,...n}=e;return(0,a.jsx)("p",{className:"text-black mb-2 text-break",...n})},ul:e=>{let{node:t,...n}=e,s={...n,ordered:"false"};return(0,a.jsx)("ul",{className:"mb-3",...s})},ol:e=>{let{node:t,...n}=e,s={...n,ordered:"true"};return(0,a.jsx)("ol",{className:"mb-2",...s})},a:FootnoteLink,code(e){let{node:t,inline:r,className:o,children:u,style:m,...h}=e;return r?(0,a.jsx)("code",{onClick:()=>{navigator.clipboard.writeText(String(u))},className:o,style:"dark"===i?d:c,...h,children:u}):(0,a.jsx)(T.Z,{highlighterProps:h,url:"",className:o,showRunInCodeMode:n,isLoggedIn:s,isValidProPlan:l,children:String(u)})}},children:u})}),cancelledMessage=()=>(0,a.jsxs)("p",{className:"text-danger",children:[(0,a.jsx)("i",{className:"fe fe-x-circle"})," ","Cancelled"]}),errorMessage=()=>(0,a.jsxs)("p",{children:["The inference service may be temporarily unavailable - we have alerts for this and will be fixing it soon.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"You can try the regenerate button in a few moments.",(0,a.jsx)("br",{})]});FootnoteLink.defaultProps={href:""};var components_AnswerPanel=function(e){let{question:t,answerIndex:n,waitingForStreamStart:s,answer:r,searchResults:o,multiSearchQueries:i,cancelled:c,doneStreaming:d,showRunInCodeMode:u,metadata:m,isLoggedIn:h,isValidProPlan:p}=e,[x,f]=(0,l.useState)(!1),g=null==m?void 0:m.model_name,b=null==m?void 0:m.mode,w=(e=>{if(!e)return null;let t=o.map(e=>e.url),formatParagraph=(e,n)=>{let a=e;!d&&n&&(a=a.replace(v.yV,"[".concat(v.qz,"](#loading)"))),a=(a=(0,v.Yg)(a,t)).replace(v.V7,(e,t)=>o?"".concat(t):"");let s=/\$(?=\d+)/g,l=a.split(/(`[^`]*`)/g);l.forEach((e,t)=>{e.startsWith("`")||(l[t]=e.replace(s,"\\$"))}),a=l.join("");let r=a.match(v.x);if(n&&r&&r.length>0){let e=r[r.length-1];"`"===e?a=a.substring(0,a.length-1):e.split("`").length<3&&(a+="`")}return n&&a.endsWith("[")&&(a=a.substring(0,a.length-1)),a},formatCodeBlock=e=>e.replace(v.PT,(e,t)=>e[0]),n=e.split("```");return n.map((e,t)=>{let s=!d&&t===n.length-1;if(t%2!=0){let n=formatCodeBlock(e),l=s&&!n.endsWith("\n");return(0,a.jsx)(B,{markdown:"```".concat(n).concat(l?"\n":"","```"),showRunInCodeMode:u,isLoggedIn:h,isValidProPlan:p},t)}let l=e.trimStart().split("\n\n");return l.map((e,t)=>(0,a.jsx)(B,{markdown:formatParagraph(e,s&&t===l.length-1),showRunInCodeMode:u,isLoggedIn:h,isValidProPlan:p},t))})})(r),j=d&&!s&&!w&&!c;(0,l.useEffect)(()=>{j&&(y.n.track("Inference server unavailable shown",{answerIndex:n}),console.error("Inference server unavailable"))},[j]);let N="Answer";return g&&(N+=" | ".concat(g," Model")),void 0!==b&&"Normal"!==b&&(N+=" | ".concat(b)),(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{className:"text-uppercase mt-1",children:N}),(0,a.jsx)(H,{images:null==m?void 0:m.images}),i&&i.length>0&&!j&&(0,a.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{f(e=>!e)},children:[(0,a.jsxs)("h6",{className:"text-uppercase text-muted",children:[(0,a.jsx)("i",{className:"fe fe-chevron-".concat(x?"right":"down")})," ","Doing multiple web searches..."]}),!x&&(0,a.jsx)("ul",{style:{listStyleType:"none"},className:"mb-3",children:i.map((e,t)=>(0,a.jsxs)("li",{className:"text-muted".concat("success"!==e.state?" animate-in-multi-search":""),children:[(0,a.jsx)("i",{className:"fe fe-".concat("web_results"===e.state?"search":"arrow-right"),style:{fontSize:"0.85em"}})," ",e.query," ","success"===e.state?(0,a.jsx)("i",{className:"fe fe-check-circle text-success",style:{fontSize:"0.85em"}}):(0,a.jsx)("span",{style:{display:"inline-block"},className:"px-5",children:(0,a.jsx)("div",{className:"dot-flashing"})})]},e.query))})]}),s&&O,s&&O,s&&O,!s&&(null!=w?w:c?cancelledMessage():errorMessage())]})},U=n(7907),components_PaginationButtons=function(e){let{pageIndex:t,setPageIndex:n,numPages:s}=e,l=Array.from(Array(s).keys());return(0,a.jsx)("ul",{className:"pagination pagination-sm mb-0",children:l.map((e,s)=>(0,a.jsx)("li",{className:"page-item ".concat(t===s?"active":""),children:(0,a.jsx)("button",{className:"page-link btn-pagination",onClick:()=>n(s),type:"button",children:s+1})},s))})},W=(0,l.memo)(function(e){var t,n;let{searchResults:s,loading:r,openLinksInNewTab:o,customLinks:i}=e,[c,d]=(0,l.useState)(0),{isXs:u,isSm:m,isMd:h}=(0,R.k)(),[p,x]=(0,l.useState)(!1),f=u||m||h?4:5,g=u?1:5,w=Array.from(Array(g).keys()).map(e=>(0,a.jsxs)("div",{className:"mb-6 placeholder-glow",children:[(0,a.jsx)("span",{className:"placeholder placeholder-sm col-6"}),(0,a.jsx)("span",{className:"placeholder placeholder-sm col-11"}),(0,a.jsx)("span",{className:"placeholder placeholder-sm col-10"})]},"placeholder ".concat(e))),v=[];for(let e=0;e<s.length;e+=f)v.push(s.slice(e,e+f));if(i.length>0){let e=i.map((e,t)=>({title:"Custom Link ".concat(t),url:e,description:"Your custom link."}));v=[e,...v]}return r||0!==v.length?(0,a.jsxs)("div",{className:"position-relative mt-5",children:[(0,a.jsx)("h6",{className:"text-uppercase d-inline p-0",children:"Sources"}),r&&w,(0,a.jsx)("div",{className:"row",children:c<v.length&&(null===(t=v[c])||void 0===t?void 0:t.slice(0,p?void 0:f).map((e,t)=>(0,b.jv)(e.url)?(0,a.jsx)("div",{className:"".concat(u||m||h?"col-6":""),children:(0,a.jsx)(U.Z,{openLinksInNewTab:o,index:t,webResult:e,pageIndex:c})},e.url):null))}),(u||m||h)&&!p&&(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 pt-0 pb-2 btn-no-border lift",onClick:()=>x(!0),children:[(0,a.jsx)("i",{className:"fe fe-plus-circle me-2"}),"Show more sources"]})}),!r&&(!(u||m||h)||(u||m||h)&&p)&&(0,a.jsx)("div",{className:"row mt-2",children:(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(components_PaginationButtons,{pageIndex:c,setPageIndex:d,numPages:null!==(n=null==v?void 0:v.length)&&void 0!==n?n:0})})})]}):null}),q=n(21719),G=n(94184),$=n.n(G);let Q=["as","disabled"];function useButtonProps({tagName:e,disabled:t,href:n,target:a,rel:s,role:l,onClick:r,tabIndex:o=0,type:i}){e||(e=null!=n||null!=a||null!=s?"a":"button");let c={tagName:e};if("button"===e)return[{type:i||"button",disabled:t},c];let handleClick=a=>{var s;if(!t&&("a"!==e||(s=n)&&"#"!==s.trim())||a.preventDefault(),t){a.stopPropagation();return}null==r||r(a)};return"a"===e&&(n||(n="#"),t&&(n=void 0)),[{role:null!=l?l:"button",disabled:void 0,tabIndex:t?void 0:o,href:n,target:"a"===e?a:void 0,"aria-disabled":t||void 0,rel:"a"===e?s:void 0,onClick:handleClick,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),handleClick(e))}},c]}let V=l.forwardRef((e,t)=>{let{as:n,disabled:s}=e,l=function(e,t){if(null==e)return{};var n,a,s={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Q),[r,{tagName:o}]=useButtonProps(Object.assign({tagName:n,disabled:s},l));return(0,a.jsx)(o,Object.assign({},l,r,{ref:t}))});V.displayName="Button";var z=n(76792);let K=l.forwardRef(({as:e,bsPrefix:t,variant:n,size:s,active:l,className:r,...o},i)=>{let c=(0,z.vE)(t,"btn"),[d,{tagName:u}]=useButtonProps({tagName:e,...o});return(0,a.jsx)(u,{...d,...o,ref:i,className:$()(r,c,l&&"active",n&&`${c}-${n}`,s&&`${c}-${s}`,o.href&&o.disabled&&"disabled")})});K.displayName="Button",K.defaultProps={variant:"primary",active:!1,disabled:!1};var J=n(45697),Y=n.n(J);let X={type:Y().string,tooltip:Y().bool,as:Y().elementType},ee=l.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:s=!1,...l},r)=>(0,a.jsx)(e,{...l,ref:r,className:$()(t,`${n}-${s?"tooltip":"feedback"}`)}));ee.displayName="Feedback",ee.propTypes=X;let et=l.createContext({}),en=l.forwardRef(({id:e,bsPrefix:t,className:n,type:s="checkbox",isValid:r=!1,isInvalid:o=!1,as:i="input",...c},d)=>{let{controlId:u}=(0,l.useContext)(et);return t=(0,z.vE)(t,"form-check-input"),(0,a.jsx)(i,{...c,ref:d,type:s,id:e||u,className:$()(n,t,r&&"is-valid",o&&"is-invalid")})});en.displayName="FormCheckInput";let ea=l.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...s},r)=>{let{controlId:o}=(0,l.useContext)(et);return e=(0,z.vE)(e,"form-check-label"),(0,a.jsx)("label",{...s,ref:r,htmlFor:n||o,className:$()(t,e)})});ea.displayName="FormCheckLabel";var es=n(53439);let el=l.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:s=!1,reverse:r=!1,disabled:o=!1,isValid:i=!1,isInvalid:c=!1,feedbackTooltip:d=!1,feedback:u,feedbackType:m,className:h,style:p,title:x="",type:f="checkbox",label:g,children:b,as:w="input",...v},j)=>{t=(0,z.vE)(t,"form-check"),n=(0,z.vE)(n,"form-switch");let{controlId:N}=(0,l.useContext)(et),y=(0,l.useMemo)(()=>({controlId:e||N}),[N,e]),k=!b&&null!=g&&!1!==g||(0,es.XW)(b,ea),S=(0,a.jsx)(en,{...v,type:"switch"===f?"checkbox":f,ref:j,isValid:i,isInvalid:c,disabled:o,as:w});return(0,a.jsx)(et.Provider,{value:y,children:(0,a.jsx)("div",{style:p,className:$()(h,k&&t,s&&`${t}-inline`,r&&`${t}-reverse`,"switch"===f&&n),children:b||(0,a.jsxs)(a.Fragment,{children:[S,k&&(0,a.jsx)(ea,{title:x,children:g}),u&&(0,a.jsx)(ee,{type:m,tooltip:d,children:u})]})})})});el.displayName="FormCheck";var er=Object.assign(el,{Input:en,Label:ea});n(42473);let eo=l.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:s,id:r,className:o,isValid:i=!1,isInvalid:c=!1,plaintext:d,readOnly:u,as:m="input",...h},p)=>{let x;let{controlId:f}=(0,l.useContext)(et);return e=(0,z.vE)(e,"form-control"),x=d?{[`${e}-plaintext`]:!0}:{[e]:!0,[`${e}-${n}`]:n},(0,a.jsx)(m,{...h,type:t,size:s,ref:p,readOnly:u,id:r||f,className:$()(o,x,i&&"is-valid",c&&"is-invalid","color"===t&&`${e}-color`)})});eo.displayName="FormControl";var ei=Object.assign(eo,{Feedback:ee}),ec=(0,n(66611).Z)("form-floating");let ed=l.forwardRef(({controlId:e,as:t="div",...n},s)=>{let r=(0,l.useMemo)(()=>({controlId:e}),[e]);return(0,a.jsx)(et.Provider,{value:r,children:(0,a.jsx)(t,{...n,ref:s})})});ed.displayName="FormGroup";let eu=l.forwardRef((e,t)=>{let[{className:n,...s},{as:l="div",bsPrefix:r,spans:o}]=function({as:e,bsPrefix:t,className:n,...a}){t=(0,z.vE)(t,"col");let s=(0,z.pi)(),l=(0,z.zG)(),r=[],o=[];return s.forEach(e=>{let n,s,i;let c=a[e];delete a[e],"object"==typeof c&&null!=c?{span:n,offset:s,order:i}=c:n=c;let d=e!==l?`-${e}`:"";n&&r.push(!0===n?`${t}${d}`:`${t}${d}-${n}`),null!=i&&o.push(`order${d}-${i}`),null!=s&&o.push(`offset${d}-${s}`)}),[{...a,className:$()(n,...r,...o)},{as:e,bsPrefix:t,spans:r}]}(e);return(0,a.jsx)(l,{...s,ref:t,className:$()(n,!o.length&&r)})});eu.displayName="Col";let em=l.forwardRef(({as:e="label",bsPrefix:t,column:n,visuallyHidden:s,className:r,htmlFor:o,...i},c)=>{let{controlId:d}=(0,l.useContext)(et);t=(0,z.vE)(t,"form-label");let u="col-form-label";"string"==typeof n&&(u=`${u} ${u}-${n}`);let m=$()(r,t,s&&"visually-hidden",n&&u);return(o=o||d,n)?(0,a.jsx)(eu,{ref:c,as:"label",className:m,htmlFor:o,...i}):(0,a.jsx)(e,{ref:c,className:m,htmlFor:o,...i})});em.displayName="FormLabel",em.defaultProps={column:!1,visuallyHidden:!1};let eh=l.forwardRef(({bsPrefix:e,className:t,id:n,...s},r)=>{let{controlId:o}=(0,l.useContext)(et);return e=(0,z.vE)(e,"form-range"),(0,a.jsx)("input",{...s,type:"range",ref:r,className:$()(t,e),id:n||o})});eh.displayName="FormRange";let ep=l.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:s,isValid:r=!1,isInvalid:o=!1,id:i,...c},d)=>{let{controlId:u}=(0,l.useContext)(et);return e=(0,z.vE)(e,"form-select"),(0,a.jsx)("select",{...c,size:n,ref:d,className:$()(s,e,t&&`${e}-${t}`,r&&"is-valid",o&&"is-invalid"),id:i||u})});ep.displayName="FormSelect";let ex=l.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:s,...l},r)=>(e=(0,z.vE)(e,"form-text"),(0,a.jsx)(n,{...l,ref:r,className:$()(t,e,s&&"text-muted")})));ex.displayName="FormText";let ef=l.forwardRef((e,t)=>(0,a.jsx)(er,{...e,ref:t,type:"switch"}));ef.displayName="Switch";var eg=Object.assign(ef,{Input:er.Input,Label:er.Label});let eb=l.forwardRef(({bsPrefix:e,className:t,children:n,controlId:s,label:l,...r},o)=>(e=(0,z.vE)(e,"form-floating"),(0,a.jsxs)(ed,{ref:o,className:$()(t,e),controlId:s,...r,children:[n,(0,a.jsx)("label",{htmlFor:s,children:l})]})));eb.displayName="FloatingLabel";let ew={_ref:Y().any,validated:Y().bool,as:Y().elementType},ev=l.forwardRef(({className:e,validated:t,as:n="form",...s},l)=>(0,a.jsx)(n,{...s,ref:l,className:$()(e,t&&"was-validated")}));ev.displayName="Form",ev.propTypes=ew;var ej=Object.assign(ev,{Group:ed,Control:ei,Floating:ec,Check:er,Switch:eg,Label:em,Text:ex,Range:eh,Select:ep,FloatingLabel:eb}),components_AnswerFeedbackModal=function(e){let{show:t,setShow:n,sendFeedback:s,currentFeedback:l}=e,handleClose=()=>n(!1),r=!1===l?"What was the issue? How can it be improved?":"What do you like about the response?";return(0,a.jsx)(M.Z,{show:t,onHide:handleClose,children:(0,a.jsx)(M.Z.Body,{className:"bg-light rounded-1 container",children:(0,a.jsxs)(ej,{onSubmit:e=>{let t={helpful:l};for(let n=0;n<e.target.elements.length;n+=1)"checkbox"===e.target.elements[n].type&&(t[e.target.elements[n].id]=e.target.elements[n].checked),"textarea"===e.target.elements[n].type&&(t.comment=e.target.elements[n].value);s(t,"Feedback Form"),handleClose(),e.preventDefault()},children:[(0,a.jsxs)(ej.Group,{className:"m-1 mb-5",controlId:"exampleForm.ControlTextarea1",children:[(0,a.jsx)("h4",{children:r}),(0,a.jsx)(ej.Control,{className:"bg-white",as:"textarea",type:"textarea",rows:3})]}),!1===l&&(0,a.jsxs)(ej.Group,{className:"m-1 mb-5",controlId:"formBasicCheckbox",children:[(0,a.jsx)(ej.Check,{type:"checkbox",label:"Answer isn't true",id:"inaccurate"}),(0,a.jsx)(ej.Check,{type:"checkbox",label:"Answer is incomplete",id:"tooShort"}),(0,a.jsx)(ej.Check,{type:"checkbox",label:"I waited too long",id:"tooSlow"})]}),(0,a.jsxs)("p",{className:"m-1 p-1",children:["Have more feedback?"," ",(0,a.jsx)("a",{href:A.jT,children:"Join our discord"})]}),(0,a.jsx)(K,{className:"m-1 rounded-1 btn-sm",variant:"secondary",onClick:handleClose,children:"Close"}),(0,a.jsx)(K,{className:"m-1 rounded-1 btn-sm",variant:"primary",type:"submit",children:"Submit"})]})})})},components_RegenerateFeedback=function(e){let{sendFeedback:t}=e,{isXs:n}=(0,R.k)();return(0,a.jsx)("div",{className:"alert bg-light alert-dismissible fade show p-3",role:"alert",children:(0,a.jsxs)("div",{className:n?"container justify-content-center d-flex text-center":"container d-flex",style:n?{flexWrap:"wrap"}:{},children:[(0,a.jsx)("div",{className:"flex-grow-1 align-self-center",children:(0,a.jsx)("strong",{children:"Was this response better or worse?"})}),(0,a.jsxs)("div",{className:n?"row":"",children:[(0,a.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("better"),type:"button",children:[(0,a.jsx)("i",{className:"fe fe-thumbs-up m-2"}),"Better"]}),(0,a.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("worse"),type:"button",children:[(0,a.jsx)("i",{className:"fe fe-thumbs-down m-2"}),"Worse"]}),(0,a.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("same"),type:"button",children:[(0,a.jsx)("i",{className:"fe fe-minus-circle m-2"}),"Same"]})]})]})})};function ShareMenu(e){let{question:t,currentAnswer:n,conversationContent:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,a.jsx)("i",{className:"fe fe-share m-2"})}),(0,a.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,a.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Share "}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Link For Sharing"]})}),n&&(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(n)},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy this Answer"]})}),s&&(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(s)},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Conversation"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{let e="https://twitter.com/intent/tweet?text=Phind Search: ".concat(encodeURIComponent(t),"&url=").concat(encodeURIComponent(window.location.href));window.open(e,"_blank")},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-twitter m-1",viewBox:"0 2 16 16",children:(0,a.jsx)("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})}),"Twitter"]})})]})]})}ShareMenu.defaultProps={currentAnswer:"",conversationContent:""};var eN=(0,l.memo)(ShareMenu),ey=(0,l.memo)(function(e){let{suggestedFollowups:t,customSearchHandler:n,suggestedCodeModeActions:s,customClickHandler:r}=e,[o,i]=(0,l.useState)(!0),handleClickFollowup=async(e,t)=>{e.preventDefault(),n&&n(t),y.n.track("Click Suggested Followup",{prompt:t})},handleClickCodeModeAction=async(e,t)=>{e.preventDefault(),r&&r(t),y.n.track("Click Suggested Code Mode Action",{prompt:t})},{isXs:c,isSm:d,isMd:u}=(0,R.k)();return(0,a.jsxs)("div",{className:(c||d||u)&&(null==t?void 0:t.length)?"mt-5 mb-6":"my-5",children:[!!(null==t?void 0:t.length)&&(0,a.jsx)("a",{onClick:()=>i(e=>!e),style:{cursor:"pointer"},children:(0,a.jsxs)("h6",{className:"text-uppercase mt-1",children:["Suggestions",(0,a.jsx)("i",{className:"fe fe-chevron-".concat(o?"up":"down")})]})}),!!(null==s?void 0:s.length)&&o&&s.slice(0,c?3:s.length).map(e=>(0,a.jsx)(x.E.a,{onClick:t=>handleClickCodeModeAction(t,e),initial:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)("button",{type:"button",className:"lift shadow-none btn btn-success btn-sm m-1 text-wrap text-start ms-0 me-2 rounded-1",style:{background:"#27ba8e"},children:[(0,a.jsx)("i",{className:"fe fe-code"}),(0,a.jsx)("span",{className:"ms-2",children:e})]})},e)),!!(null==t?void 0:t.length)&&o&&t.slice(0,c?3:t.length).map(e=>(0,a.jsx)(x.E.a,{onClick:t=>handleClickFollowup(t,e),initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start ms-0 me-2 rounded-1",children:e})},e))]})}),ek=n(60117),eS=n(12074),eC=n(81722),eP=n(51479),eI=n(5088),eA=n(11940),eT=n(66605);function MastheadSearchbox(e){let{placeholder:t,initialQuestionFromCache:n,defaultNumRowsToShow:s,customSearchHandler:r,children:o,answerModel:i,setAnswerModel:c,maxTokenLimit:d=A.TW,canUseGPT4:u=!1}=e,{paymentPlanData:{paymentPlan:m}}=(0,eA.$)(),p="Free"!==m,x="Pro"===m||"Enterprise"===m,[f,g]=(0,q.Z)("searchMode","auto"),[b,v]=(0,q.Z)("allowMultiSearch",!1),[N,y]=(0,l.useState)(n),[k,S]=(0,l.useState)(""),[C,P]=(0,l.useState)(""),[I,T]=(0,l.useState)(0),[D,M]=(0,l.useState)(!1),{data:_}=(0,h.useSession)(),{isXs:L}=(0,R.k)(),H=(0,l.useRef)(null);(0,l.useEffect)(()=>{!function(e){if(null==e?void 0:e.current){let t=e.current;t.style.height="auto";let n=Math.min(t.scrollHeight,512);t.style.height="".concat(n,"px")}}(H)},[H,N]);let handleSubmit=async e=>{e.preventDefault();let t=N.trim();if(""!==t){if(O>=A.xn){let e=(0,j.yF)(t,d,i);localStorage.setItem("long-question",e)}r?await r(t,"",f,b,k):O>=A.xn&&(window.location.href="/search?source=searchbox&long=true")}},handleFileChange=e=>{var t;if(!u){alert("You are out of GPT-4 uses for today.");return}c("GPT-4");let n=null==_?void 0:null===(t=_.user)||void 0===t?void 0:t.userId;if(!n){console.error("User token not found");return}let a=new FormData;a.append("file",e),(0,eI.OC)(a,n,M,T,S)},O=N.length,Z=(0,j.In)("".concat(N),i),{isXs:B}=(0,R.k)(),U=(0,a.jsxs)("form",{className:"mb-3",onSubmit:e=>handleSubmit(e),children:[(0,a.jsxs)("div",{className:"shadow darkmode-light search-bar-input-group container px-1 m-0 mx-auto",children:[(0,a.jsx)("textarea",{tabIndex:0,ref:H,autoFocus:!0,autoComplete:"off",autoCorrect:B?"on":"off",autoCapitalize:"off",spellCheck:"false",name:"q",className:"form-control bg-white darkmode-light searchbox-textarea search-bar-hide-scrollbar fs-5 px-2 pt-2 pb-0 my-1 mx-0 row",rows:s,placeholder:t,"aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:e=>{(e.metaKey||e.controlKey)&&g("never"),(!e.shiftKey||"Enter"!==e.key)&&("Enter"!==e.key||L||(e.preventDefault(),handleSubmit(e)))},onKeyUp:e=>{("Meta"===e.key||"Control"===e.key)&&g("auto")},onChange:e=>{let t=e.target.value;y(t)},value:N,onPaste:e=>{let{items:t}=e.clipboardData;if(x){for(let e=0;e<t.length;e+=1)if(-1!==t[e].type.indexOf("image")){let n=t[e].getAsFile();n&&handleFileChange(n)}}}}),(0,a.jsx)(ek.Z,{title:C,setTitle:P}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-8 d-flex justify-content-start",children:o}),(0,a.jsxs)("div",{className:"col-4 d-flex justify-content-end",children:[(0,a.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm fs-6 px-2 pb-2 ".concat(Z>=d?"text-danger":"darkmode-light"),style:{width:Z<256?"7em":"auto",visibility:Z>256?"visible":"hidden"},children:[Z," tokens ",Z>=d&&"(will truncate)"]}),(0,a.jsx)(E.Z,{message:"Allow multiple search queries (if necessary) to give slower but better answers",children:(0,a.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),p?v(e=>!e):P(w.n3)},children:[" ",(0,a.jsx)("i",{className:"fe fe-toggle-".concat(p&&b?"right":"left"," ").concat(0===N.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,a.jsx)(E.Z,{message:x&&!u?"Upload image (out of uses)":"Upload image",children:u?(0,a.jsx)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault()},children:(0,a.jsxs)(eC.b,{handleChange:handleFileChange,maxSize:20,types:eI.J2,children:[" ",(0,a.jsx)("i",{className:"fe fe-image ".concat(0===N.length?"masthead-textbox":"darkmode-light"),style:{cursor:"pointer"}})," "]})}):(0,a.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),x?alert("You are out of GPT-4 uses for today."):P(w.n3)},children:[" ",(0,a.jsx)("i",{className:"fe fe-image ".concat(0===N.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,a.jsx)(E.Z,{message:"Configure Phind to always search, never search, or automatically decide when to search (default).",children:(0,a.jsx)(eT.Z,{searchMode:f,setSearchMode:g,currentQuestion:N})}),(0,a.jsxs)("button",{type:"submit",onClick:handleSubmit,className:"btn btn-sm mx-1 rounded-1 fs-5 p-1 lift ".concat(""),children:[" ",(0,a.jsx)("i",{className:"fe fe-arrow-right ".concat(0===N.length?"masthead-textbox":"darkmode-light")})," "]})]})]})]}),D&&(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)(eP.Z,{now:I,label:"".concat(I,"%")})}),k&&(0,a.jsx)("div",{style:{height:"250px",position:"relative"},children:(0,a.jsx)(F(),{src:k,className:"mt-5",layout:"fill",objectFit:"contain",alt:"The image you uploaded.",unoptimized:!0})})]});return U}MastheadSearchbox.defaultProps={customSearchHandler:null,children:null,maxTokenLimit:A.TW};var eE=n(92218),eD=(0,l.memo)(function(){let[e,t]=(0,l.useState)(!1);if((0,l.useEffect)(()=>t(!0),[]),!e)return null;let trackClick=e=>{y.n.track("Click Explore Card",{prompt:e})},n=(0,b.TV)(A.i1),s=n.slice(0,4);return(0,a.jsx)("div",{className:"m-0",children:(0,a.jsx)("div",{className:"container col-10",children:(0,a.jsx)("div",{className:"mt-6 p-2 text-center",children:s.map(e=>(0,a.jsx)("a",{href:"/search?q=".concat(encodeURIComponent(e)),onClick:()=>trackClick(e),children:(0,a.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start py-1 px-2 rounded-1",children:e})},e))})})})}),eF=n(51565),eM=n(96748),eR=n(43489);function OnLoadTooltip(e){let{children:t,message:n,show:s=!1,placement:r="top"}=e,[o,i]=(0,l.useState)(s),c=(0,l.useRef)(null);return(0,l.useEffect)(()=>{i(s)},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:c,children:t}),(0,a.jsx)(eM.Z,{target:c.current,show:o,placement:r,children:e=>(0,a.jsx)(eR.Z,{id:"overlay-tooltip",...e,children:n})})]})}OnLoadTooltip.defaultProps={show:!1,placement:"top"};var e_=n(59668);function Masthead(e){var t;let{isValidProPlan:n,numRequestsDoneForGPT4:s,numRequestsDoneForClaude:r,planName:o,planNotExpired:i,isLoggedIn:c,customSearchHandler:u,answerModel:m,setAnswerModel:p,isInBayArea:x}=e,{headerHeight:f}=(0,eF.g)(),{data:g}=(0,h.useSession)(),[v]=(0,q.Z)("numAnonPremiumRequestsDone",0),j=g?(0,b.N7)(o,"GPT-4",i)-s:A.a0-v,N=g?(0,b.N7)(o,"Phind-70B",i)-s:A.Dv-v,k=g?(0,b.N7)(o,"Claude Opus",i)-r:A.a0-v;j=Math.max(j,0),N=Math.max(N,0),k=Math.max(k,0);let[S,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>C(!0),[]);let P=n||i&&"Phind Free"!==o,I=(0,a.jsx)(a.Fragment,{children:"From idea to product"}),{isXs:T}=(0,R.k)(),D=m===A.aB||"Phind-70B"===m||"Phind Instant"===m||"GPT-4"===m&&j<=0,M=n?A.dx:A.TW,_=A.DF;"Phind Instant"===m?_=A._H:n?_=A.jm:g&&(_=A.FK);let L=D?_:M,H=null!==(t=g&&j>0)&&void 0!==t&&t,[O,Z]=(0,q.Z)("hasShownProModelTooltip",!1),B=P&&!O;(0,l.useEffect)(()=>{B&&(p(A.CF),setTimeout(()=>{Z(!0)},2e3))},[]);let U=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:[(0,a.jsx)("i",{className:"fe fe-alert-triangle text-danger"})," ","Currently at peak capacity. Sign in for priority."," ",(0,a.jsx)("a",{className:"btn btn-sm btn-light text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",onClick:()=>{(0,h.signIn)().then(()=>{y.n.track("Sign In")})},children:"Sign in"})]}),W=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Sign in for daily Phind-70B uses + answer history."," ",(0,a.jsx)("a",{className:"btn btn-sm btn-light text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",onClick:()=>{(0,h.signIn)().then(()=>{y.n.track("Sign In")})},children:"Sign in"})]}),G=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Have questions, feature requests, or bugs reports?"," ",(0,a.jsx)("a",{className:"btn btn-sm btn-light text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",href:A.jT,children:"Join our Discord Community"})]}),$=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get answers directly in VS Code."," ",(0,a.jsx)("a",{href:A.WW,className:"btn btn-sm btn-light text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",children:"Try the Phind Extension"})]}),Q=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get faster answers, longer context, image uploads, and access to GPT-4."," ",(0,a.jsx)(d(),{className:"btn btn-sm btn-light text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",href:"/plans",onClick:()=>{y.n.track("Click Upgrade to Pro",{from:"Masthead"})},children:"See Plans"})]}),V=(0,a.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["We are having a meetup in San Francisco on"," ",e_.WP," ",(0,a.jsx)(d(),{className:"btn btn-sm btn-primary text-black rounded-1 mb-1 ms-1 py-0 px-2 lift",href:"/meetup",onClick:()=>{y.n.track("Click Meetup",{from:"Masthead"})},children:"Come join us! \uD83D\uDE80"})]}),[z,K]=(0,l.useState)([]),[J,Y]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{Y(!0);let e=[];g?P?P&&(e=[...(0,b.TV)([G,$])]):e=[...(0,b.TV)([Q])]:(e=[...(0,b.TV)([W,Q,$])],(0,w.mj)()&&(e=[...(0,b.TV)([U])])),x&&!e_.L5&&(e=.8>Math.random()?[V]:[...(0,b.TV)([...e,V])]),K(e)},[g]),S)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"row justify-content-center mx-auto",style:{width:"80%"},children:[(0,a.jsxs)("div",{className:"col-10",children:[(0,a.jsx)("h1",{className:"display-4 mb-".concat(T?8:4," text-center mt-5"),style:{animation:c?"":"slide-in-from-bottom 1s ease-out forwards"},children:(0,a.jsx)(d(),{href:"/search?home=true",children:(0,a.jsx)(F(),{className:"img-fluid darkmode-img",width:187.5,height:65,src:"/images/phind_v2.svg",alt:"...",style:{maxWidth:"100%",height:"auto"},priority:!0})})}),!T&&(0,a.jsx)("h1",{className:"fs-2 mb-6 text-center mx-auto",style:{maxWidth:"60%",opacity:c?1:0,animation:c?"":"fade-in 1s ease-out forwards",animationDelay:"1s"},children:I})]}),(0,a.jsx)("div",{className:T?"col-12":"col-8",style:{maxWidth:900,minWidth:T?0:600},children:(0,a.jsx)(E.Z,{message:"Try our new Phind-70B model",children:(0,a.jsx)(MastheadSearchbox,{placeholder:T?"Ask anything.":"Ask anything. What are you stuck on?",initialQuestionFromCache:"",defaultNumRowsToShow:2,answerModel:m,setAnswerModel:p,maxTokenLimit:L,customSearchHandler:u,canUseGPT4:H,children:(0,a.jsx)(OnLoadTooltip,{message:"Try our new Phind-70B model, now based on Llama 3",show:B,placement:"bottom",children:(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(eE.Z,{answerModel:m,setAnswerModel:p,requestsLeftForGPT4:j,requestsLeftForPhind70B:N,requestsLeftForClaude:k,isPro:!!n,session:g,isOnMasthead:!0,setHasShown70BTooltip:Z})})})})})})]}),S&&!c&&!T&&(0,a.jsx)(eD,{}),S&&J&&z[0],(0,a.jsx)("div",{style:{height:f,transition:"height ".concat(A.zh," linear")}})]}):null}function TimingDisplay(e){var t;let{timing:n,start:s,scalingFactor:l}=e;return(0,a.jsx)("div",{style:{display:"block",color:"white"},children:(0,a.jsxs)("div",{style:{display:"block",width:((null!==(t=n.end)&&void 0!==t?t:Date.now()/1e3)-n.start)/l,marginLeft:(n.start-s)/l,background:"rgba(0, 255, ".concat(n.children.length>0?255:0,", 0.3)"),outline:n.children.length>0?"1px solid white":"none",whiteSpace:"nowrap"},title:n.indicator,children:[(0,a.jsxs)("div",{style:{outline:n.children.length>0?"1px solid white":"none"},children:[n.indicator,(0,a.jsxs)("i",{style:{color:"rgba(255, 255, 255, 0.7) "},children:[" (",null!==n.end?"".concat(Math.round((n.end-n.start)*1e3).toLocaleString()," ms"):"running...",")"]})]}),n&&n.children&&n.children.length>0&&(0,a.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.2)",display:"block"},children:n.children.sort((e,t)=>e.start-t.start).map(e=>(0,a.jsx)(TimingDisplay,{timing:e,start:n.start,scalingFactor:l},e.id))})]})})}function DebugInfo(e){let{serverIndicatorTiming:t,backendDelay:n,setShowDebugInfo:s}=e,[r,o]=(0,l.useState)(.005);return(0,a.jsxs)("div",{className:"p-4 mx-5 mb-5 border border-secondary rounded",children:[(0,a.jsxs)("div",{className:"d-flex flex flex-row",children:[(0,a.jsx)("span",{children:"Debug info"}),(0,a.jsx)("span",{style:{flex:1}}),(0,a.jsx)("i",{className:"fe fe-x ms-2",style:{cursor:"pointer"},onClick:()=>{s(!1)}})]}),(0,a.jsx)("hr",{}),void 0===t?"No debug info available":(0,a.jsxs)(a.Fragment,{children:["Waiting for backend:"," ",Math.round(n).toLocaleString(),"ms",(0,a.jsx)("div",{style:{overflowX:"scroll",background:"black"},children:(0,a.jsx)(TimingDisplay,{timing:t,start:t.start,scalingFactor:r})}),"Scale",(0,a.jsx)("input",{type:"range",min:1,max:400,step:1,value:1/r,onChange:e=>o(1/parseFloat(e.target.value))})]})]})}Masthead.defaultProps={isValidProPlan:!1,isLoggedIn:!1,customSearchHandler:void 0};var eL=n(53703),eH=n(71968),eO=n(2086);let eZ={question:"",searchResults:[],answer:"",context:"",previousAnswers:[],customLinks:[],metadata:{},multiSearchQueries:[],cancelled:!1},eB="/search?home=true";function Search(e){let{cachedAnswerHistory:t,numRequestsDoneForGPT4:n,numRequestsDoneForClaude:s,phindPlan:r,paidPlanValid:o,anonUserId:c,cachedSuggestedFollowupQuestions:d,cachedSuggestedCodeModeActions:u,chatHistoryEnabled:m,isLoggedIn:h,backendToken:x,challengeSeeds:f,isInBayArea:g,countryCode:b,initialThreadPrivate:w}=e,v=(0,i.useRouter)(),j=(0,l.useRef)(eB),[N,y]=(0,l.useState)((0,p.Mc)());return(0,l.useEffect)(()=>{v.asPath===eB&&j.current!==v.asPath&&y((0,p.Mc)()),j.current=v.asPath},[v.asPath]),(0,a.jsx)(SearchComponent,{cachedAnswerHistory:t,numRequestsDoneForGPT4:n,numRequestsDoneForClaude:s,phindPlan:r,paidPlanValid:o,anonUserId:c,cachedSuggestedFollowupQuestions:d,cachedSuggestedCodeModeActions:u,chatHistoryEnabled:m,isLoggedIn:h,backendToken:x,challengeSeeds:f,isInBayArea:g,countryCode:b,initialThreadPrivate:w},N)}function SearchComponent(e){var t,n,r;let{cachedAnswerHistory:c,numRequestsDoneForGPT4:k,numRequestsDoneForClaude:S,phindPlan:C,paidPlanValid:P,anonUserId:I,cachedSuggestedFollowupQuestions:T,cachedSuggestedCodeModeActions:D,chatHistoryEnabled:F,isLoggedIn:M,backendToken:_,challengeSeeds:L,isInBayArea:H,countryCode:O,initialThreadPrivate:Z}=e,B=(0,i.useRouter)(),{isSidebarOpen:U}=(0,eS.A)(),{headerHeight:G}=(0,eF.g)(),$=(0,eL.R6)(P,M),[Q,V]=(0,q.Z)("localRequestsCounter-4/23/24",{anon:0,loggedIn:0}),[z,K]=(0,l.useState)(!1),{setDefaultCodeToShow:J,setSearchHistoryToExport:Y,setSuggestedCodeModeAction:X}=(0,g.y)(),ee=(0,l.useRef)((0,p.Mc)());(0,l.useEffect)(()=>{let handleRouteChange=e=>{(e===eB||e.startsWith("/agent"))&&(ee.current=(0,p.Mc)())};return B.events.on("routeChangeStart",handleRouteChange),()=>{B.events.off("routeChangeStart",handleRouteChange)}},[B]);let{query:et}=B,{q:en,cache:ea,fromExtension:es,source:el,c:er,long:eo,home:ei,searchMode:ec,allowMultiSearch:ed}=et,{data:eu,status:em}=(0,h.useSession)(),[eh,ep]=(0,l.useState)(!1);(0,l.useEffect)(()=>{ep(!0)},[]);let[ex,ef]=(0,l.useState)(void 0),eg=(0,l.useRef)(new AbortController),{signal:eb}=eg.current,[ew,ev]=(0,l.useState)(null!=c?c:[]),[ej,eC]=(0,l.useState)(null!=T?T:[]),[eP,eI]=(0,l.useState)(null!=D?D:[]),eA=ew.length,eT=null==ew?void 0:ew.map(e=>e.question),eD=null==eT?void 0:eT[0],eM=null==eT?void 0:eT.slice(-1)[0],eR=null==ew?void 0:null===(t=ew.slice(-1)[0])||void 0===t?void 0:t.context,[e_,eU]=(0,l.useState)(),[eW,eq]=(0,l.useState)(0),[eG,e$]=(0,q.Z)("phindDebugMode",!1);(0,l.useEffect)(()=>{let handleKeyDown=e=>{"1"===e.key&&e.shiftKey&&e.metaKey&&(e$(e=>!e),e.preventDefault())};return window.addEventListener("keydown",handleKeyDown),()=>{window.removeEventListener("keydown",handleKeyDown)}},[]);let[eQ,eV]=(0,q.Z)("numAnonPremiumRequestsDone",0),[ez,eK]=(0,l.useState)(0),[eJ,eY]=(0,l.useState)(0),[eX,e0]=(0,l.useState)(0),e1=100,e5=100,e2=100;eh&&(eu?(e1=(0,b.N7)(C,"GPT-4",P)-(k+ez),e5=(0,b.N7)(C,"Phind-70B",P)-(k-eJ),e2=(0,b.N7)(C,"Claude Opus",P)-(S+eX)):"loading"!==em&&(e1=A.a0-eQ,e5=A.Dv-eQ,e2=A.a0-eQ),e1=Math.max(0,e1),e5=Math.max(0,e5),e2=Math.max(0,e2));let e6=C.toLowerCase().includes("enterprise")&&P,e3=("Phind Pro"===C||"Phind Pro Yearly"===C)&&P,e4=(0,b.WN)(C,P),e8=e3?A.CF:A.aB,[e7,e9]=(0,q.Z)("answerModel",e8),te=e7===A.aB||"Phind-70B"===e7||"Phind Instant"===e7||"GPT-4"===e7&&e1<=0,tt=e3||e6?A.dx:A.TW,tn=A.DF;"Phind Instant"===e7?tn=A._H:e3||e6?tn=A.jm:eu&&(tn=A.FK);let ta=te?tn:tt,ts=eo&&window.localStorage,tl=ts&&localStorage.getItem("long-question")||"",tr=ts&&localStorage.getItem("long-context")||"",to=null!==(n=null!=en?en:tl)&&void 0!==n?n:"",ti=null!==(r=null!=er?er:tr)&&void 0!==r?r:"",tc=null!=ea?ea:"",[td,tu]=(0,l.useState)(Array(eA).fill(!1)),[tm,th]=(0,l.useState)(Array(eA).fill(!1)),[tp,tx]=(0,l.useState)(Array(eA).fill(!1)),[tf,tg]=(0,l.useState)(Array(eA).fill(!0)),[tb,tw]=(0,l.useState)(null),[tv,tj]=(0,l.useState)(!1),[tN,ty]=(0,l.useState)(-1),[tk,tS]=(0,l.useState)(""),[tC,tP]=(0,l.useState)(""),[tI,tA]=(0,l.useState)(Array(eA).fill(!1)),tT={},tE=new Date,tD=tE.toLocaleDateString(),tF="";tF=window.navigator.language;let{isXs:tM}=(0,R.k)(),{isMd:tR}=(0,R.k)(),{isSm:t_}=(0,R.k)(),tL={date:tD,language:tF,detailed:!0,anonUserId:I,answerModel:e7,searchMode:"auto",allowMultiSearch:"true"===ed},handleStopGenerating=()=>{eg.current.abort(),eg.current=new AbortController,ev(e=>{let t=[...e];for(let e=0;e<eA;e+=1)tf[e]||(t[e].cancelled=!0);return t}),th(e=>e.map(()=>!1)),tx(e=>e.map(()=>!1)),tg(e=>e.map(()=>!0))};(0,l.useEffect)(()=>{let handleEsc=e=>{let t=tv||tk||tC;"Escape"!==e.key||t||handleStopGenerating()};return window.addEventListener("keydown",handleEsc),()=>{window.removeEventListener("keydown",handleEsc)}},[tf]);let removeAnswer=async e=>{var t;(null===(t=window)||void 0===t?void 0:t.confirm("Are you sure you want to remove this answer?"))&&(y.n.track("Click Remove Answer",{answer:ew[e]}),ev(t=>{let n=t.filter((t,n)=>n!==e);if(!F)return n;let a=null!=ea?ea:void 0;return a&&(0===n.length?(0,N.lu)([a]).then(()=>{B.push(eB)}):(0,N.tI)(a,void 0,n)),n}))},trackSearchEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feedback",n={question:eM,context:eR,source:es?"extension":el,answerCount:ew.length,options:tL,searchOptions:tT,phindPlan:C};y.n.track(t,{...n,...e})},regenerateAnswer=(e,t,n)=>{tA(t=>(0,b.N6)(t,e,!1)),ev(a=>{if(e>=a.length)return console.error("Answer index out of bounds"),a;let s=a[e],l=t||s.question||"";y.n.track("Regenerate Answer",{question:l,previousAnswerData:s,answerIndex:e});let r={...tL,regenerate:!0};n&&(r={...r,answerModel:n});let o=(0,b.N6)(a,e,{...s,question:l,metadata:void 0});return generateAnswer(e,o,r),(null==s?void 0:s.answer)&&ty(e),o})};(0,l.useEffect)(()=>{e1<=0&&!tk&&"GPT-4"===e7&&eh&&(tS(w.n3),setTimeout(()=>{e9(e8)},1e3))},[e1,eh]),(0,l.useEffect)(()=>{e5<=0&&!tk&&"Phind-70B"===e7&&eh&&(tS(w.n3),setTimeout(()=>{e9(A.aB)},1e3))},[e5,eh]),(0,l.useEffect)(()=>{if(eh&&window.localStorage&&B&&B.isReady&&!ei&&!ea){if(to)0===ew.length&&(ee.current=(0,p.Mc)(),handleSubmit(0,to,ti,!1,0,ec,"true"===ed))}},[en,B,eh]);let handleSubmit=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"auto",r=arguments.length>6?arguments[6]:void 0;if(tp.some(e=>!0===e)||tf.some(e=>!1===e)){console.warn("Did not start new stream as previous stream is still running.");return}if(""===t)return;let o=(0,w.ky)(Q,e4,M,O,tF,tP,tS);if(o)return;let i=[],c=t.match(/(?:^|\s)(https?:\/\/\S+)(?:\s|$)/g);c&&c.forEach(e=>{let t=e.trim();!(t.includes("127.0.0")||t.includes("localhost"))&&(i.includes(t)||i.push(t))}),m.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110});let d=t;if((0,j.In)(t,e7)>ta){if(!eu){tP("Log in for larger context");return}if(!e3&&!e6){tS("Upgrade for larger context");return}d=(0,j.yF)(t,ta,e7)}if(!z&&!e4){let e=ew.map(e=>e.question+e.answer).join(" "),t=d+e;if((0,j.In)(t,e7)>ta){let e="Some parts of your thread are not used in the context.";eu?tS("".concat(e," Upgrade for larger context")):tP("".concat(e," Log in for larger context")),K(!0)}}let u={...eZ,question:d,context:n};ev(t=>(0,b.N6)(t,e,u)),th(t=>(0,b.N6)(t,e,"never"!==l)),tx(t=>(0,b.N6)(t,e,!0)),eC(t=>(0,b.N6)(t,e,[])),eI(t=>(0,b.N6)(t,e,[])),(t=>{let n=(0,b.N6)(ew,e,t);ev(n),a&&ev(e=>e.slice(0,s+1));let o={...tL,searchMode:l,customLinks:"never"===ec?[]:i,allowMultiSearch:void 0!==r?r:"true"===ed};generateAnswer(e,n,o)})(u)},copyAnswer=e=>{let{answer:t,searchResults:n}=ew[e];tA(t=>(0,b.N6)(t,e,!0));let a=n.map(e=>{var t;return null!==(t=e.url)&&void 0!==t?t:"No URL provided."}),s=(0,v.AA)(t,a);y.n.track("Click Copy Answer",{formattedAnswer:s}),navigator.clipboard.writeText(s)},generateAnswer=function(e,t){let n,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tL,r=(0,w.ky)(Q,e4,M,O,tF,tP,tS);if(r)return;let o=ee.current,i=new Map;if(eU(n),eC(t=>(0,b.N6)(t,e,[])),eI(t=>(0,b.N6)(t,e,[])),!1===tf[e]){console.warn("Did not start new stream as previous stream is still running.");return}let c=-1,d=-1,h=Date.now();tx(t=>(0,b.N6)(t,e,!0)),tg(t=>(0,b.N6)(t,e,!1)),tw(null);let{question:p,context:x}=t[e],f=e>=1;if(f){let n=t.slice(0,e);a=(0,N.iK)(p,n,x,l,L,_,ex)}else a=(0,N.tA)(p,x,l,L,_,ex);ef(void 0),eu||"GPT-4"!==e7&&"Phind-70B"!==e7||eV(e=>e+1),a.then(async t=>{let a="",l={},r=!0,x=(0,u.j)(t=>{if(o!==ee.current){console.warn("Answer UUID changed, ignoring event");return}if("event"===t.type){let{data:x}=t;if(r&&(eq(d=Date.now()-h),0!==e&&m.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110})),r=!1,x.includes("<PHIND_SPAN_BEGIN>")){let e=x.replace("<PHIND_SPAN_BEGIN>","").replace("</PHIND_SPAN_BEGIN>",""),t=JSON.parse(e);if(i.set(t.id,t),t.parent){var u;null===(u=i.get(t.parent))||void 0===u||u.children.push(t),eU({...n})}else n=t,eU({...t})}else if(x.includes("<PHIND_SPAN_END>")){let e=x.replace("<PHIND_SPAN_END>","").replace("</PHIND_SPAN_END>",""),t=JSON.parse(e),a=i.get(t.id);a&&(a.end=t.end),eU({...n})}else if(x.includes("<PHIND_BACKEND_ERROR>"))tx(t=>(0,b.N6)(t,e,!1)),tg(t=>(0,b.N6)(t,e,!0)),s.uT("Backend error: ".concat(x));else if(x.includes("<PHIND_FOLLOWUP>")){let t=x.replace("<PHIND_FOLLOWUP>","").replace("</PHIND_FOLLOWUP>",""),n=JSON.parse(t).replaceAll('\\"','"');eC(t=>{let a=[...t[e],n];return(0,b.N6)(t,e,a)})}else if(x.includes("<PHIND_CODE_MODE_ACTION>")){let t=x.replace("<PHIND_CODE_MODE_ACTION>","").replace("</PHIND_CODE_MODE_ACTION>",""),n=JSON.parse(t);eI(t=>{let a=[...t[e],n];return(0,b.N6)(t,e,a)})}else if(x.includes("<PHIND_DONE/>")){if(tg(t=>(0,b.N6)(t,e,!0)),o!==ee.current){console.warn("Answer UUID changed, ignoring answer"),console.log(o,ee.current),y.n.track("Search Cancelled by Navigating Away",{question:p,awayPath:window.location.pathname});return}if("/search"!==window.location.pathname){y.n.track("Search Cancelled by Navigating Away",{question:p,awayPath:window.location.pathname});return}ev(t=>{let s={...t[e],answer:a,metadata:l},r=(0,b.N6)(t,e,s);return finishGeneratingAnswer(e,r,h,d,c,n,l),r})}else if(x.includes("<PHIND_MULTISEARCH_QUERIES>")){let t=x.replace("<PHIND_MULTISEARCH_QUERIES>","").replace("</PHIND_MULTISEARCH_QUERIES>",""),n=JSON.parse(t);n.length>0&&ev(t=>(0,b.N6)(t,e,{...t[e],multiSearchQueries:n.map(e=>({query:e,state:"begin"}))}))}else if(x.includes("<PHIND_MULTISEARCH_QUERY_STATE>")){let t=x.replace("<PHIND_MULTISEARCH_QUERY_STATE>","").replace("</PHIND_MULTISEARCH_QUERY_STATE>",""),n=JSON.parse(t);ev(t=>{let a=t[e].multiSearchQueries;if(a){let s=a.map(e=>e.query===n.query?{...e,state:n.state}:e);return(0,b.N6)(t,e,{...t[e],multiSearchQueries:s})}return t})}else if(x.includes("<PHIND_MULTISEARCH_QUERY_FAILURE/>"))ev(t=>(0,b.N6)(t,e,{...t[e],multiSearchQueries:[]}));else if(x.includes("<PHIND_METADATA>")){let t=x.replace("<PHIND_METADATA>","").replace("</PHIND_METADATA>",""),n=JSON.parse(t),a=n.model_name;eu&&"GPT-4"===a?eK(e=>e+1):eu&&"Phind-70B"===a?eY(e=>e+1):eu&&"Claude Opus"===a&&e0(e=>e+1),l={...l,...n},ev(t=>(0,b.N6)(t,e,{...t[e],metadata:{...t[e].metadata,...n}}))}else if(x.includes("<PHIND_WEBRESULTS>")){let t=JSON.parse(x.replace("<PHIND_WEBRESULTS>","").replace("</PHIND_WEBRESULTS>",""));if(th(t=>(0,b.N6)(t,e,!1)),!Array.isArray(t))return;ev(n=>(0,b.N6)(n,e,{...n[e],searchResults:t}))}else tx(t=>(0,b.N6)(t,e,!1)),a+=x,ev(t=>(0,b.N6)(t,e,{...t[e],answer:a})),-1===c&&(c=Date.now())}}),f=t.body,g=(0,b.Mz)(f,eb);for await(let e of(0,b.Uj)(g)){let t=new TextDecoder().decode(e);x.feed(t)}}).catch(t=>{console.error(t),s.Tb(t),tx(t=>(0,b.N6)(t,e,!1)),tg(t=>(0,b.N6)(t,e,!0))})},finishGeneratingAnswer=async(e,t,n,a,l,r,o)=>{var i,c;let d=null!=ea?ea:void 0,{question:u,answer:m,context:h}=t[e];F&&(d?await(0,N.tI)(d,void 0,t):d=await(0,N.Qc)(u,t).then(e=>e.json()).then(e=>e.newKey).catch(e=>{console.error(e),s.Tb(e)}));let p=d?"".concat(window.location.origin,"/search?cache=").concat(d):void 0;(null==eu?void 0:null===(i=eu.user)||void 0===i?void 0:i.userId)&&y.n.identify(null==eu?void 0:null===(c=eu.user)||void 0===c?void 0:c.userId);let x=(0,j.In)(u,e7),f=(0,j.In)(h,e7),g=(0,j.In)(m,e7),b=!(0,j.AP)(e7),w=Date.now(),v={"Waiting for backend":a},flattenTiming=(e,t)=>{t.end&&(v[e+t.indicator]=(t.end-t.start)*1e3),t.children.forEach(n=>flattenTiming("".concat(e).concat(t.indicator,"/"),n))};flattenTiming("",r),trackSearchEvent({answerIndex:e,answer:m,newCachedUrlLink:p,question:u,context:h,questionLength:u.length,answerLength:m.length,contextLength:h.length,combinedQuestionContextLength:u.length+h.length,questionTokens:x,contextTokens:f,combinedQuestionContextTokens:x+f,answerTokens:g,startWaitingForAnswerTime:n,answerBeginGenerationTime:l,answerFinishTime:w,timeToFirstToken:l-n,timeToAnswer:w-n,timeFirstToLastToken:w-l,tokensPerSecond:g/((w-l)/1e3),mixpanelId:null==o?void 0:o.id,debuggingTime:v,usingDummyTokenizer:b},"search"),V(e=>{let t=eu?"loggedIn":"anon";return{...e,[t]:e[t]+1}}),F&&d&&B.replace({pathname:"/search",query:{cache:d}},void 0,{scroll:!1,shallow:!0})},[tH,tO]=(0,l.useState)(Array(eA).fill(!1));if(!eh)return null;let tZ=(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,a.jsx)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - ".concat(G,"px)"),transition:"height ".concat(A.zh," linear")},children:(0,a.jsx)(Masthead,{isValidProPlan:e3,numRequestsDoneForGPT4:k,numRequestsDoneForClaude:S,planName:C,planNotExpired:P,isLoggedIn:M,isInBayArea:H,customSearchHandler:(e,t,n,a,s)=>{s&&ef(s);let l=(0,w.ky)(Q,e4,M,O,tF,tP,tS);if(!l){if(!eu&&(0,j.In)(e,e7)>ta){tP("Log in for larger context");return}B.replace({pathname:"/search",query:{q:e,...t&&{c:t},searchMode:n,allowMultiSearch:a}},void 0,{scroll:!0,shallow:!0})}},answerModel:e7,setAnswerModel:e9})})})}),tB=(0,a.jsxs)("div",{className:"container-xl",children:[(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,a.jsxs)("div",{children:[e5<=0&&"Phind-70B"===e7&&(eu?(0,a.jsx)(E.Z,{message:"Upgrade to Phind Pro for 500+ daily Phind-70B uses",placement:"bottom",children:(0,a.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily Phind-70B uses"})}):(0,a.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,h.signIn)().then(()=>{y.n.track("Sign In")})},children:"Sign in for more Phind-70B model uses"})),e1<=0&&"GPT-4"===e7&&(eu?(0,a.jsx)(E.Z,{message:"Upgrade to Phind Pro for 500+ daily GPT-4 uses",placement:"bottom",children:(0,a.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily GPT-4 uses"})}):(0,a.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,h.signIn)().then(()=>{y.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses"}))]})})}),ew.map((e,t)=>{let{question:n,searchResults:s,answer:l,customLinks:r,metadata:o,context:i,multiSearchQueries:c,cancelled:d}=e,u="".concat(n,"-").concat(t),h=t===ew.length-1,p=n.length>150?"".concat(n.slice(0,150),"..."):n,g=(!s||!(s.length>0))&&l||tM||t_||tR?"col-12":"col-8",w=(!s||!(s.length>0))&&l||tM||t_||tR?"col-12":"col-8";return(0,a.jsxs)("div",{style:{minHeight:h?"calc(100vh - ".concat(G,"px)"):0},children:[(0,a.jsx)("div",{className:"pt-6 pb-1",children:(0,a.jsx)("hr",{className:"separator my-0"})}),(0,a.jsxs)(m.W_,{name:"answer-".concat(t),className:"row",children:[(0,a.jsx)("div",{className:"col-lg-8 col-xl-8",children:tf[t]?(0,a.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",style:{visibility:"hidden"},type:"button",children:[(0,a.jsx)("i",{className:"fe fe-stop-circle m-2"}),"Stop Generating [Esc]"]}):(0,a.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",onClick:()=>{var e,t;y.n.track("Stop Generating",{question:n,questionLength:n.length,answer:l,answerLength:null!==(e=null==l?void 0:l.length)&&void 0!==e?e:0,numLinks:null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0}),handleStopGenerating()},type:"button",children:[(0,a.jsx)("i",{className:"fe fe-stop-circle m-2"}),"Stop Generating [Esc]"]})}),(0,a.jsxs)("div",{className:w,children:[!tH[t]&&(0,a.jsx)(E.Z,{message:"Edit Question",children:(0,a.jsx)("span",{className:n!==p?"fs-5 mb-3 font-monospace":"fw-bold fs-2 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:()=>{tf[t]&&(y.n.track("Click Edit Question",{question:n,answerIndex:t}),tO(e=>(0,b.N6)(e,t,!0)))},children:td[t]?n:p})}),tH[t]&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(f.Z,{placeholder:"Edit your question.",initialQuestionFromCache:n+(i?"\n".concat(i):""),showAllowMultiSearch:e4,defaultNumRowsToShow:1,customSearchHandler:(e,n,a,s,l)=>{tA(e=>(0,b.N6)(e,t,!1)),handleSubmit(t,e,n,!0,t,a,l),tO(e=>(0,b.N6)(e,t,!1))},answerModel:e7,maxTokenLimit:ta,hasGptSearchesRemaining:e1>0,setAnswerModel:e9})}),(0,a.jsx)("button",{className:"btn btn-no-border lift ms-n2 btn-sm",type:"button",onClick:()=>{tO(e=>(0,b.N6)(e,t,!1))},children:"Cancel"})]}),n!==p&&(0,a.jsx)(E.Z,{message:"Show Full Question",children:(0,a.jsx)("i",{className:td[t]?"fe fe-chevron-up":"fe fe-chevron-down",onClick:()=>{tu(e=>({...e,[t]:!e[t]}))}})})]}),(tM||t_||tR)&&s&&s.length>0&&(0,a.jsx)("div",{className:"col-lg-4 col-xl-4",children:(0,a.jsx)("div",{className:"container-xl web-container p-0 ms-0",children:(0,a.jsx)(W,{customLinks:r,openLinksInNewTab:!0,searchResults:s,loading:tm[t]})})}),eG&&h&&(0,a.jsx)(DebugInfo,{backendDelay:eW,serverIndicatorTiming:e_,setShowDebugInfo:e$}),(0,a.jsxs)("div",{className:"".concat(g," mt-5"),children:[(0,a.jsx)("div",{children:(0,a.jsx)(components_AnswerPanel,{answerIndex:t,question:n,answer:l,waitingForStreamStart:tp[t],searchResults:s,doneStreaming:tf[t],multiSearchQueries:null!=c?c:[],cancelled:d,showRunInCodeMode:!0,metadata:o,isLoggedIn:M,isValidProPlan:e3})}),!tp[t]&&tf[t]&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-n2 mb-4",children:[tN===t&&(0,a.jsx)(components_RegenerateFeedback,{sendFeedback:e=>{let n=ew[t].previousAnswers.slice(-1)[0];trackSearchEvent({regenerate:e,previousAnswer:n,answer:l},"Regenerate Feedback"),ty(-1)}}),(0,a.jsx)(eE.Z,{answerModel:e7,setAnswerModel:e9,requestsLeftForGPT4:e1,requestsLeftForPhind70B:e5,requestsLeftForClaude:e2,isPro:e3,session:eu}),(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{regenerateAnswer(t)},type:"button",children:(0,a.jsx)("i",{className:"fe fe-refresh-cw m-2"})}),(null===tb||!0===tb)&&(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===tb&&(trackSearchEvent({helpful:!0}),tw(!0),tj(!0))},type:"button",children:(0,a.jsx)("i",{className:"fe fe-thumbs-up m-2"})}),(null===tb||!1===tb)&&(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===tb&&(trackSearchEvent({helpful:!1}),tw(!1),tj(!0))},type:"button",children:(0,a.jsx)("i",{className:"fe fe-thumbs-down m-2"})}),(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>copyAnswer(t),type:"button",children:tI[t]?(0,a.jsx)("i",{className:"fe fe-check text-success mx-2"}):(0,a.jsx)("i",{className:"fe fe-copy mx-2"})}),(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",type:"button",onClick:()=>{m.OK.scrollTo("answer-".concat(t),{duration:400,delay:0,smooth:"easeInOutQuart",offset:-110}),tO(e=>(0,b.N6)(e,t,!0))},children:(0,a.jsx)("i",{className:"fe fe-edit m-2"})}),(0,a.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",type:"button",onClick:()=>removeAnswer(t),children:(0,a.jsx)("i",{className:"fe fe-trash m-2"})}),(0,a.jsx)(eN,{question:eD,currentAnswer:l,conversationContent:ew.map(e=>"## ".concat(e.question,"\n").concat((0,v.AA)(e.answer,e.searchResults.map(e=>e.url)))).join("\n\n")}),eu&&(0,a.jsx)(eO.Z,{cacheParam:tc,initialPrivateValue:Z},tc)]}),(h||!tM)&&(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsx)(ey,{suggestedFollowups:ej[t],customSearchHandler:e=>{handleSubmit(eA,e,"")},suggestedCodeModeActions:eP[t],customClickHandler:e=>{let t=(0,b.Bj)(ew);Y(t),X(e);let n=t[t.length-1],a=(0,b.Zw)(n);a&&J(a.code),B.push("/code?home=true")}})}),eA<$&&!tp.some(e=>!0===e)&&!tf.some(e=>!1===e)&&t===eA-1&&(0,a.jsx)("div",{className:"fixed-bottom bg-gradient-light",style:{pointerEvents:"none"},children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"".concat(U?"col-lg-2":"col-lg-0"," sidebar mt-0 p-0")}),(0,a.jsx)("div",{className:"".concat(U?"col-lg-10":"col-lg-12"," sidebar"),children:(0,a.jsx)("div",{className:"container-xl",children:(0,a.jsx)("div",{className:"col-xl-12",style:{pointerEvents:"auto"},children:(0,a.jsx)("div",{className:w,children:(0,a.jsx)(f.Z,{placeholder:"Ask a followup question",initialQuestionFromCache:"",defaultNumRowsToShow:1,showAllowMultiSearch:e4,customSearchHandler:(e,t,n,a,s)=>handleSubmit(eA,e,t,!1,0,n,s),answerModel:e7,maxTokenLimit:ta,hasGptSearchesRemaining:e1>0,setAnswerModel:e9,setParentImageUrl:ef,imageUrl:ex},ew.length)})})})})]})})]}),!tp.some(e=>!0===e)&&!tf.some(e=>!1===e)&&t===eA-1&&(0,a.jsx)(eL.ZP,{isLoggedIn:!!eu,numUserMessages:eA,paidPlanValid:P})]}),((tM||t_||tR)&&h&&!tf[t]||!tM&&!t_&&!tR)&&(s&&s.length>0||!l)&&(0,a.jsxs)("div",{className:"col-lg-4 col-xl-4",children:[(0,a.jsx)("div",{className:tM||t_||tR?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 ms-0 ".concat(h?"mb-10":""),children:(0,a.jsxs)("div",{style:{visibility:(tM||t_||tR)&&h?"hidden":"visible"},children:[!tf[t]&&(0,a.jsx)(x.E.div,{layout:!0,initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,a.jsx)(W,{customLinks:r,openLinksInNewTab:!0,searchResults:s,loading:tm[t]})}),tf[t]&&(0,a.jsx)(W,{customLinks:r,openLinksInNewTab:!0,searchResults:s,loading:tm[t]})]})}),(0,a.jsx)("div",{className:"container-xl mt-4 align-items-end"})]})]})]},u)})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o(),{children:(0,a.jsx)("title",{children:null!=eM?eM:"Phind"})}),(0,a.jsx)(components_AnswerFeedbackModal,{show:tv,setShow:tj,sendFeedback:trackSearchEvent,currentFeedback:tb}),(0,a.jsx)(ek.Z,{title:tk,setTitle:tS}),(0,a.jsx)(eH.Z,{title:tC,setTitle:tP}),"true"===ei?tZ:tB]})}Search.defaultProps={phindPlan:"Phind Free",paidPlanValid:!1,anonUserId:"",cachedAnswerHistory:[],cachedSuggestedFollowupQuestions:[],cachedSuggestedCodeModeActions:[]};var eU=!0,eW=Search},59668:function(e,t,n){"use strict";n.d(t,{I$:function(){return a},L5:function(){return i},V4:function(){return s},WP:function(){return c},hc:function(){return d}});let a="Cloudflare HQ, 101 Townsend St, San Francisco",s="https://forms.gle/PEZsnQLHjLrkem648",l=new Date("".concat("2024-05-14","T").concat("18:00:00")),r=new Date,o=l.getTime()-r.getTime(),i=o+36e5<0,c=new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(l),d=new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(l)}},function(e){e.O(0,[74,134,8,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);